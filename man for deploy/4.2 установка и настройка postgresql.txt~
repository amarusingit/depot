устанавливаем postgresql
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib libpq-dev

создаём пользователя для СУБД
sudo -u postgres createuser -s andrew

заходим в консоль СУБД
sudo -u postgres psql

устанавливаем пароль пользователю СУБД
\password andrew

выходим из консоли
\q

в файл Gemfile в корне приложения вставляем ссылку на гем для СУБД

group :production do
    # Use postgresql as the database for Active Record in production 
    gem 'pg'
end

запускаем помощник
bundle install


в файле приложения config/database.yml меняем раздел для продакшена
production:
	adapter: postgresql
	encoding: utf8
	database: depot_production
	pool: 5
	username: andrew
	password: r5t6yR%T^Y
	host: localhost
т.к. в этом файле хранятся секретные реквизиты для подключения к БД, 
то вручную помещаем его в подпапку shared/config и с помощью строки
в файле deploy.rb в девелопменте делаем символьную ссылку на него
set :linked_files, %w{config/database.yml config/database.yml}

база данных инициализируется из папки приложения:
rake db:setup RAILS_ENV="production"

ошибки смотрим в логах:
/var/log/apache2   -    ошибки web-сервера
/папка приложения/log - ошибки RoR

бьемся поодня чтобы понять, что надо изменить ключ кэша в store view/index.html.rb



